# 网络层
- 寻址
    - IP
        - 网络号
        - 主机号
- 路由
    - route 路由表

## 寻址
### IP 和 掩码
掩码和IP地址按位与运算能得到网络号，如
`192.168.1.1` 和 `255.255.255.0` 按位与能获得 `192.168.1.0` 这就是局域网的网络号，`192.168.1.1` 是该网络下的某个机器，编号为1.

## 路由
路由器只关心它的下一跳，至于数据之后再传送到哪，它不再关心了。

在linux 系统中， `route -n` 能打印一张路由表。如下：
```
Network Destination        Netmask          Gateway       Interface  Metric
          0.0.0.0          0.0.0.0      192.168.1.1     192.168.1.19     45
        127.0.0.0        255.0.0.0         On-link         127.0.0.1    331
        127.0.0.1  255.255.255.255         On-link         127.0.0.1    331
  127.255.255.255  255.255.255.255         On-link         127.0.0.1    331
      192.168.1.0    255.255.255.0         On-link      192.168.1.19    301
     192.168.1.19  255.255.255.255         On-link      192.168.1.19    301
    192.168.1.255  255.255.255.255         On-link      192.168.1.19    301
        224.0.0.0        240.0.0.0         On-link         127.0.0.1    331
        224.0.0.0        240.0.0.0         On-link      192.168.1.19    301
  255.255.255.255  255.255.255.255         On-link         127.0.0.1    331
  255.255.255.255  255.255.255.255         On-link      192.168.1.19    301
```
当我们访问百度的网络的时候(www.baidu.com 36.152.44.95)，我们首先会解析得到百度的IP地址 `36.152.44.95`, 通过上面的路由表，我们将每一条的掩码和该地址进行按位与运算， 并和 `Destination`比对。我们可以很容易发现，百度的地址只能匹配第一条路由，因此数据下一跳会通过 `192.168.1.1` 传输出去。

我们可以发现，无论访问哪个外部网络，都会走子网掩码为`0.0.0.0`的路由，这个掩码为`0.0.0.0`的网关就是默认网关，基本所有的网络都会通过这个网关传输。

## 总结
网络层只会处理IP地址点对点的传输，比如我们知道可以通过路由表和子网掩码的运算来找到下一跳的IP,但是我们怎么能正确将数据包传给下一条，这需要数据链路层来解决。
